(window.webpackJsonpmark=window.webpackJsonpmark||[]).push([[0],{11:function(t,e,a){t.exports=a(18)},16:function(t,e,a){},17:function(t,e,a){},18:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(10),i=a.n(o),s=(a(16),a(8)),c=a(7),l=a(2),h=a(3),d=a(5),u=a(4),m=a(1),p=a(6),k=(a(17),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(u.a)(e).call(this,t))).state={id:Math.floor(Date.now()),title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0437\u0430\u043c\u0435\u0442\u043a\u0438 ",text:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043c\u0435\u0442\u043a\u0438"},a.onCreateMark=a.onCreateMark.bind(Object(m.a)(a)),a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"onCreateMark",value:function(){var t=Math.floor(Date.now());this.setState({id:t}),localStorage.setItem("mark"+this.state.id,JSON.stringify(this.state)),this.props.onAddMark()}},{key:"render",value:function(){return r.a.createElement("button",{className:"main-area__button",onClick:this.onCreateMark},this.props.children)}}]),e}(r.a.Component)),b=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(u.a)(e).call(this,t))).onEditEnable=a.onEditEnable.bind(Object(m.a)(a)),a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"onEditEnable",value:function(){this.props.onEditEnable()}},{key:"render",value:function(){return r.a.createElement("button",{className:"main-area__button",onClick:this.onEditEnable,style:this.props.style?this.props.style:null},this.props.children)}}]),e}(r.a.Component),g=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(u.a)(e).call(this,t))).onDeleteMark=a.onDeleteMark.bind(Object(m.a)(a)),a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"onDeleteMark",value:function(t){t.stopPropagation(),localStorage.removeItem("mark"+this.props.markId),this.props.onDeleteMark()}},{key:"render",value:function(){return"normal"===this.props.type?r.a.createElement("button",{className:"main-area__button",onClick:this.onDeleteMark},this.props.children):"mark"===this.props.type?r.a.createElement("div",{className:"mark-container__delete-container"},r.a.createElement("div",{className:"delete-container__delete",onClick:this.onDeleteMark},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")):void 0}}]),e}(r.a.Component),v=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(u.a)(e).call(this,t))).onSelectMark=a.onSelectMark.bind(Object(m.a)(a)),a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"onSelectMark",value:function(t){t.stopPropagation();var e=JSON.parse(localStorage.getItem("mark"+this.props.mark.id));this.props.onChangeMark(e.id,e.title,e.text)}},{key:"render",value:function(){return r.a.createElement("div",{className:"mark-container__mark",onClick:this.onSelectMark},r.a.createElement("div",{className:"mark-container__title"},r.a.createElement("div",{className:"mark-container__title-text"},this.props.mark.title),r.a.createElement("div",{className:"mark-container__text"},this.props.mark.text.substr(0,80))),r.a.createElement(g,{type:"mark",markId:this.props.mark.id,onDeleteMark:this.props.onDeleteMark}))}}]),e}(r.a.Component),E=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(u.a)(e).call(this,t))).state={title:"",text:"",currentId:0,xPos:0,yPos:0,xPosGlobal:0,yPosGlobal:0,caretPos:0,caretSet:!1,selector:""},a.onTextChange=a.onTextChange.bind(Object(m.a)(a)),a.onTextClick=a.onTextClick.bind(Object(m.a)(a)),a.onEdit=a.onEdit.bind(Object(m.a)(a)),a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"onTextChange",value:function(t){var e,a=t.target.name,n=t.target.name,r="";("title"===a?(n="text",r=this.props.text):(n="title",r=this.props.title),this.state.currentId!==this.props.markId)&&this.setState((e={},Object(c.a)(e,n,r),Object(c.a)(e,"currentId",this.props.markId),e));this.setState(Object(c.a)({},a,t.target.value));var o=JSON.parse(localStorage.getItem("mark"+this.props.markId));o[a]=t.target.value,localStorage.setItem("mark"+this.props.markId,JSON.stringify(o)),this.props.onEditMark()}},{key:"onTextClick",value:function(t){var e=window.getSelection().getRangeAt(0),a=e.cloneRange();a.selectNodeContents(t.target),a.setEnd(e.endContainer,e.endOffset);var n=a.toString().length,r=e.endContainer.parentElement.className,o=t.target.getBoundingClientRect();this.setState({xPos:t.clientX-o.left,yPos:t.clientY-o.top,xPosGlobal:t.clientX,yPosGlobal:t.clientY,caretPos:n,selector:r}),this.props.onShowEdit()}},{key:"onEdit",value:function(){this.setState({caretSet:!1}),this.props.onEditEnable()}},{key:"componentDidUpdate",value:function(){this.props.editEnable&&!this.state.caretSet&&""!==this.state.selector&&(this.setState({caretSet:!0}),document.getElementsByClassName(this.state.selector+"-edit")[0].focus(),document.getElementsByClassName(this.state.selector+"-edit")[0].selectionStart=this.state.caretPos)}},{key:"render",value:function(){return this.props.editEnable?r.a.createElement("div",{className:"main_area__edit-container"},r.a.createElement("input",{className:"edit-container__title-edit",type:"text",name:"title",placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0437\u0430\u043c\u0435\u0442\u043a\u0438",value:this.state.currentId!==this.props.markId?this.props.title:this.state.title,onChange:this.onTextChange}),r.a.createElement("textarea",{className:"edit-container__text-edit",type:"text",name:"text",placeholder:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043c\u0435\u0442\u043a\u0438",value:this.state.currentId!==this.props.markId?this.props.text:this.state.text,onChange:this.onTextChange})):r.a.createElement("div",{className:"main_area__edit-container"},r.a.createElement("div",{className:"edit-container__title",onClick:this.onTextClick},this.props.title),r.a.createElement("div",{className:"edit-container__text",onClick:this.onTextClick,dangerouslySetInnerHTML:{__html:this.props.text.replace(/\n/g,"<br/>")}}),this.props.showEdit?r.a.createElement(b,{onEditEnable:this.onEdit,markId:this.props.markId,style:{position:"absolute",left:this.state.xPos-50,top:this.state.yPos+10}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"):null)}}]),e}(r.a.Component),f=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(u.a)(e).call(this,t))).state={word:"",searchd:[]},a.onChangeSearch=a.onChangeSearch.bind(Object(m.a)(a)),a.levenshteinDistance=a.levenshteinDistance.bind(Object(m.a)(a)),a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;for(var a=[],n=0;n<=e.length;n++)a[n]=[n];for(var r=0;r<=t.length;r++)a[0][r]=r;for(var o=1;o<=e.length;o++)for(var i=1;i<=t.length;i++)e.charAt(o-1)===t.charAt(i-1)?a[o][i]=a[o-1][i-1]:a[o][i]=Math.min(a[o-1][i-1]+1,Math.min(a[o][i-1]+1,a[o-1][i]+1));return a[e.length][t.length]}},{key:"onChangeSearch",value:function(t){var e=this;if(this.setState({word:t.target.value}),0!==t.target.value.length){var a=this.props.mark;this.setState({searchd:[]});for(var n=function(n){for(var r=a[n].title.split(" "),o=0;o<r.length;o++)-1!==r[o].toLowerCase().indexOf(t.target.value.toLowerCase())?e.setState(function(t){return{searchd:[].concat(Object(s.a)(t.searchd),[a[n]])}}):e.levenshteinDistance(t.target.value.toLowerCase(),r[o].toLowerCase())<r[o].length-3&&e.setState(function(t){return{searchd:[].concat(Object(s.a)(t.searchd),[a[n]])}})},r=0;r<a.length;r++)n(r);var o=this.state.searchd.filter(function(t,e,a){return a.indexOf(t)===e});this.props.onSearchMark(o,!0)}else this.props.onSearchMark([],!1)}},{key:"render",value:function(){return r.a.createElement("input",{type:"text",className:"main-area__input",placeholder:"\u041f\u043e\u0438\u0441\u043a...",value:this.state.word,onChange:this.onChangeSearch})}}]),e}(r.a.Component),S=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(u.a)(e).call(this,t))).state={sort:null==localStorage.getItem("sort")?"desc":localStorage.getItem("sort"),showDropdown:!1},a.onChangeSelect=a.onChangeSelect.bind(Object(m.a)(a)),a.onOpenDropDown=a.onOpenDropDown.bind(Object(m.a)(a)),a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"onChangeSelect",value:function(t){var e=t.target.getAttribute("value");this.props.onChangeSortMark(e),localStorage.setItem("sort",e),this.setState({sort:e})}},{key:"onOpenDropDown",value:function(){this.setState({showDropdown:!this.state.showDropdown})}},{key:"render",value:function(){return r.a.createElement("div",{className:"main-area__select-container"},r.a.createElement("div",{className:"select-container__select-label"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e:"),r.a.createElement("div",{className:"select-container__select-button",onClick:this.onOpenDropDown},"desc"===this.state.sort?"\u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e \u0434\u0430\u0442\u044b":"\u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e \u0434\u0430\u0442\u044b",this.state.showDropdown?r.a.createElement("div",{className:"select-container__dropdown"},r.a.createElement("div",{className:"select-container__dropdown-button",onClick:this.onChangeSelect,value:"desc"},"\u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e \u0434\u0430\u0442\u044b"),r.a.createElement("div",{className:"select-container__dropdown-button",onClick:this.onChangeSelect,value:"asc"},"\u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e \u0434\u0430\u0442\u044b")):null))}}]),e}(r.a.Component),O=function(t){function e(){return Object(l.a)(this,e),Object(d.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-area"},r.a.createElement("div",{className:"main-area__left"},r.a.createElement("div",{className:"main-area__controls-left"},this.props.addButton,this.props.searchForm,this.props.sortForm),this.props.getList),this.props.editShow?r.a.createElement("div",{className:"main-area__right"},r.a.createElement("div",{className:"main-area__controls-right"},this.props.editButton,this.props.deleteButton),this.props.editArea):null)}}]),e}(r.a.Component),C=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(u.a)(e).call(this,t))).onChangeMark=a.onChangeMark.bind(Object(m.a)(a)),a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"onChangeMark",value:function(t,e,a){this.props.onChangeActiveMark(t,e,a)}},{key:"render",value:function(){var t=this,e=this.props.mark.map(function(e){return r.a.createElement(v,{key:e.id,mark:e,onChangeMark:t.onChangeMark,onDeleteMark:t.props.onDeleteMark})});return r.a.createElement("div",{className:"main-area__mark-container"},e)}}]),e}(r.a.Component),j=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(u.a)(e).call(this,t))).state={id:0,title:"",text:"",mark:[],searchd:[],sort:null==localStorage.getItem("sort")?"desc":localStorage.getItem("sort"),loaded:!1,changed:!1,filtered:!1,editShow:!1,editEnable:!1,showEdit:!1},a.onChangeMark=a.onChangeMark.bind(Object(m.a)(a)),a.onChangeActiveMark=a.onChangeActiveMark.bind(Object(m.a)(a)),a.onChangeSortMark=a.onChangeSortMark.bind(Object(m.a)(a)),a.onSearchMark=a.onSearchMark.bind(Object(m.a)(a)),a.onEditEnable=a.onEditEnable.bind(Object(m.a)(a)),a.onEditMark=a.onEditMark.bind(Object(m.a)(a)),a.onShowEdit=a.onShowEdit.bind(Object(m.a)(a)),a.loadLocalStorage=a.loadLocalStorage.bind(Object(m.a)(a)),a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"onChangeMark",value:function(){this.setState({changed:!0,editShow:!1,editEnable:!1,showEdit:!1})}},{key:"onChangeActiveMark",value:function(t,e,a){this.setState({id:t,title:e,text:a,editShow:!0,editEnable:!1,showEdit:!1})}},{key:"onChangeSortMark",value:function(t){this.setState({changed:!0,sort:t})}},{key:"onSearchMark",value:function(t,e){this.setState({searchd:t,filtered:e})}},{key:"onEditEnable",value:function(){this.setState({editEnable:!0})}},{key:"onShowEdit",value:function(){this.setState({showEdit:!0})}},{key:"onEditMark",value:function(){this.setState({changed:!0})}},{key:"componentDidMount",value:function(){this.state.loaded||this.loadLocalStorage()}},{key:"componentDidUpdate",value:function(){this.state.changed&&(this.loadLocalStorage(),this.state.filtered&&this.sortRenderedMark(this.state.searchd,this.state.filtered))}},{key:"loadLocalStorage",value:function(){var t=[];for(this.mark in localStorage)-1!==this.mark.indexOf("mark")&&t.push(JSON.parse(localStorage[this.mark]));this.sortRenderedMark(t,!1),this.setState({mark:t}),this.setState({loaded:!0})}},{key:"sortRenderedMark",value:function(t,e){t="desc"===this.state.sort?t.sort(function(t,e){return e.id-t.id}):t.sort(function(t,e){return t.id-e.id}),e?this.setState({searchd:t}):this.setState({mark:t}),this.setState({changed:!1})}},{key:"render",value:function(){var t=r.a.createElement(k,{onAddMark:this.onChangeMark},"+ \u0417\u0430\u043c\u0435\u0442\u043a\u0430"),e=r.a.createElement(b,{onEditEnable:this.onEditEnable,markId:this.state.id},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),a=r.a.createElement(g,{type:"normal",onDeleteMark:this.onChangeMark,markId:this.state.id},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),n=r.a.createElement(f,{onSearchMark:this.onSearchMark,mark:this.state.mark}),o=r.a.createElement(S,{onChangeSortMark:this.onChangeSortMark,sort:this.state.sort}),i=r.a.createElement(C,{onChangeActiveMark:this.onChangeActiveMark,onDeleteMark:this.onChangeMark,sort:this.state.sort,mark:this.state.filtered?this.state.searchd:this.state.mark}),s=r.a.createElement(E,{title:this.state.title,text:this.state.text,markId:this.state.id,editEnable:this.state.editEnable,showEdit:this.state.showEdit,onEditMark:this.onEditMark,onEditEnable:this.onEditEnable,onShowEdit:this.onShowEdit});return r.a.createElement(O,{addButton:t,editButton:e,deleteButton:a,searchForm:n,sortForm:o,getList:i,editArea:s,editShow:this.state.editShow})}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.7aa9fd50.chunk.js.map